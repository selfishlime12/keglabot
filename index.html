<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --accent: #0088cc;
            --bg: var(--tg-theme-bg-color, #0f0f0f);
            --text: var(--tg-theme-text-color, #ffffff);
            --sec-bg: var(--tg-theme-secondary-bg-color, #1c1c1d);
        }
        body { background: var(--bg); color: var(--text); font-family: sans-serif; padding: 20px; margin: 0; }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(10px);
            border-radius: 20px; padding: 20px; margin-bottom: 15px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .btn-top {
            width: 100%; background: var(--accent); color: white;
            border: none; padding: 12px; border-radius: 12px;
            font-weight: bold; margin-top: 10px; cursor: pointer;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã –¢–û–ü */
        #top-list { display: none; margin-top: 15px; animation: slideDown 0.3s ease; }
        .top-item {
            display: flex; justify-content: space-between;
            padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .top-item:last-child { border: none; }
        .rank-num { color: var(--accent); font-weight: bold; margin-right: 10px; }

        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div class="glass-card">
        <h2 style="margin-top:0">üÜî –ü—Ä–æ—Ñ–∏–ª—å</h2>
        <p>–ó–∞–ø—Ä–æ—Å–æ–≤: <b id="req">0</b></p>
        <button class="btn-top" onclick="toggleTop()">üèÜ –ü–û–ö–ê–ó–ê–¢–¨ –¢–û–ü –Æ–ó–ï–†–û–í</button>
        
        <div id="top-list">
            <h3 style="font-size: 14px; opacity: 0.6; text-align: center;">–¢–û–ü-5 –õ–ò–î–ï–†–û–í</h3>
            <div id="list-container"></div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        
        const params = new URLSearchParams(window.location.search);
        document.getElementById('req').innerText = params.get('req') || '0';

        // –õ–æ–≥–∏–∫–∞ –¢–û–ü–∞
        function toggleTop() {
            const list = document.getElementById('top-list');
            const isVisible = list.style.display === 'block';
            list.style.display = isVisible ? 'none' : 'block';
            tg.HapticFeedback.impactOccurred('medium');
        }

        const topData = params.get('top'); // –ë–µ—Ä–µ–º —Å—Ç—Ä–æ–∫—É "id:count|id:count"
        if (topData) {
            const container = document.getElementById('list-container');
            topData.split('|').forEach((item, index) => {
                const [uid, count] = item.split(':');
                const div = document.createElement('div');
                div.className = 'top-item';
                div.innerHTML = `
                    <span><span class="rank-num">#${index + 1}</span> ID: ${uid.slice(0, 5)}...</span>
                    <b>${count}</b>
                `;
                container.appendChild(div);
            });
        }
    </script>
</body>
</html>
